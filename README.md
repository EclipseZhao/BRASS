LICENCE
=======
Copyright (c) 2014,2015 Genome Research Ltd.

Author: Cancer Genome Project <cgpit@sanger.ac.uk>

This file is part of BRASS.

BRASS is free software: you can redistribute it and/or modify it under
the terms of the GNU Affero General Public License as published by the Free
Software Foundation; either version 3 of the License, or (at your option) any
later version.

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.

1. The usage of a range of years within a copyright statement contained within
this distribution should be interpreted as being equivalent to a list of years
including the first and last year specified and all consecutive years between
them. For example, a copyright statement that reads ‘Copyright (c) 2005, 2007-
2009, 2011-2012’ should be interpreted as being identical to a statement that
reads ‘Copyright (c) 2005, 2007, 2008, 2009, 2011, 2012’ and a copyright
statement that reads ‘Copyright (c) 2005-2012’ should be interpreted as being
identical to a statement that reads ‘Copyright (c) 2005, 2006, 2007, 2008,
2009, 2010, 2011, 2012’."

---

BRASS
=====

### BReakpoint AnalySiS

BRASS analyses one or more related BAM files of paired-end sequencing to determine potential rearrangement breakpoints.

There are several stages the main component being:

1. Collect read-pairs where both ends map but **NOT** marked as properly-paired.
2. Perform grouping based on mapped locations
3. Filter
4. Run assembly
5. Annotate with [GRASS](http://cancerit.github.io/grass/)

---

## Installation

    ./setup.sh path_to_install_to

### Pre-requisites

* The C++ code requires the presence of pstreams.h (and associated development libraries).  This is not handled by the `setup.sh` script.
* [PCAP-core](https://github.com/ICGC-TCGA-PanCancer/PCAP-core)
* [cgpVcf](https://github.com/cancerit/cgpVcf)

###

## Running BRASS

This package includes a reference implementation which handles all of the linking together of steps.

Please see the ``-h`` and ``-m`` options of ``brass.pl`` for full usage information.

It can be run in a couple of ways:

1. Fire and forget
  * Execute on a single host with multiple cores (or 1 if that's all you have)
  * Some efficiency overhead as some steps aren't parallel
2. Farm style
  * Requires 2 extra parameters in the initial command
  * See ``-help`` for further details

---

## Input

### Initial mapping

BRASS has primarily been written to work with BWA mapped data.  You are likely to get the most useful output from BWA-mem.

### Library quality

Please be aware that paired-end libraries where properly-paired reads overlap are unlikely to produce good results.

### Additional mapping information

BRASS requires accurate information regarding the insert size distribution and expects to find a ``*.bam.bas`` file
co-located with the ``*.bam``'s.  These can be generated by the ``bam_stats`` program included in the
[PCAP-core](https://github.com/ICGC-TCGA-PanCancer/PCAP-core) project.  If you use ``bwa_mem.pl`` to map your
data (same repository) then this file is generated automatically for you.
